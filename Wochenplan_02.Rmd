# Einheit vom 17.09

Sozialwissenschaftliche Datenanalyse mit R – Wochenplan 2

## Lernziele

In der zweiten Seminarwoche geht es darum die Grundlagen von R und R-Studio zu repetieren und zu erweitern.[^1] Für den weiteren Verlauf des Seminars gilt es **R als Sprache** aufzufassen – sowohl als Programmiersprache als auch als Sprache im eigentlichen Sinn. Wir wollen also ein komplexes System zur Kommunikation kennenlernen. Hierbei gibt Zeichen mit Bedeutungen (ähnliche wie Nomen, Verben,...) und auch Regeln zur Verknüpfung dieser Zeichen (ähnlich wie eine Grammatik). Diese Grundlagen gilt es alle erstmal kennezulernen und zu verstehen. Am Anfang wird vieles schwer fallen bevor man dann im weiteren Verlauf immer sicherer wird. Der zentrale Punkt in dieser Vorstellung von R als Sprache ist dabei folgender: Wir lernen eine Sprache dadurch, dass wir sie immer wieder anwenden.

In dieser beständigen Erweiterung der Grundlage und damit auch im Erlernen der R-Sprache geht es um die Vermittlung zwischen *Trivialität* und *Komplexität*: Es gilt die kleinen Schritte ernstzunehmen, sonst werden die grossen Schritte sehr schnell mühsam. R als Software und als Programmiersprache hat eine steile Lernkurve und viele Probleme werden zu Beginn auftauchen. Im Umgang mit den Problemen soll allerdings auch eine eigene Arbeitsweise mit dem Programm erlernt werden (Fehlermeldungen lesen, Lösungsstrategien im Codieren erlernen, sich selber Hilfe suchen, ...).

Für die zweite Seminarwoche lassen sich folgende Seminarziele festhalten:

* Sie können die verschiedenen Funktionsweisen der vier Fenster in R-Studio erläutern
* Sie haben R-Markdown als erweitertes Skript und Arbeitsinstrument kennengelernt. 
* Sie können ein Arbeitsverzeichnis definieren und verwenden.
* Sie verstehen das erste Grundelemente der Programmiersprache von R: Funktionen & Objekte
  + Sie wissen, wie Sie Sich Hilfe zu Funktionen holen
  + Sie wissen, was Argumente einer Funktion sind
* Sie verstehen das zweite Grundelemente der Programmiersprache von R: Objekte
  + Sie haben ein das Zusammenspiel von Funktionen und Objekte kennengelernt.
  + Sie kennen bereits drei verschiedenen Arten von Objekten 


# Aufgaben

1. Beschreiben Sie kurz die Funktionen der vier Fenster von R (in einem Texteditor Ihrer Wahl).

2. Führen sowohl in der Konsole als auch im Skripte einge Rechnungen durch und speichern Sie im Skript die Resultate der  als Kommentare. Die Rechnung könnten etwa folgende sein: folgende:
```{r results='hide'}
1+1
5 + 3 - 4
(5 + 3 - 4) / 5
```
  + Was ist der Vorteil der Arbeit im Skript gegenüber derjenigem in der Skript?
  + Sie möchten nun ihre letzte Rechnung als Objekte 'x' abspeichern. Wie könnten Sie das in der Konsole tun, ohen dass Sie nochmals den Kode der Rechnung ("(5 + 3 - 4) / 5") selber schreiben müssten? 
  + Und wo taucht nun 'x' auf?
```{r include=F}
x <- (5 + 3 - 4) / 5
```

Neben dem der Konsole und dem Skript existiiert  eine dritte Möglichkeit in R-Studio zu arbeiten, nämlich **R Markdown** (@R-rmarkdown). R Markown ist ebenfalls ein Paket und ermöglicht im Sinne eines erweiterten Skripts dynamische Analysedokumente, die Code, gerenderte Ausgabe (z. B. Grafiken) und Text kombinieren. Eine neue Markdown Datei kann via «File > New File > R Markdown» oder mit dem Button direkt unter dem «File» (oder «Datei») Button geöffnet werden. Die Datei selber ist unterteil in einfachen Fliesstext (weisser Hintergrund) oder sogenanten R Chunk (grauer Hintergrund), d.h. heisst Kodestücke (Befehle) für R. Ein R Chunk kann entweder über den «Insert»-Button im Markdown-Fenster eingefügt werden, oder aber über die Tastenkombination «Ctrl + Alt + i» (bzw. «Cmd + Option + I» bei Mac).

3. Was könnten die Vorteile sein, wenn man mit R Markdown arbeitet? Schauen Sie sich auch die Formatierungsmöglichkeiten für Fliesstext in den Cheatsheets zu R Markdown an (siehe [hier](https://rstudio.com/resources/cheatsheets/) und auf OLAT)!

4. Öffnen Sie eine neue R Markdown Datei. Versuchen Sie Ihre bisherigen Notizen zu den Aufgaben und Ihren Code in dieser Datei unterzubringen. Arbeiten Sie immer weiteren mit der Datei.

Die Grundlagen der Sprache von R sind Funktionen und Objekte [vgl. @Manderscheid2017, 25ff]. Wir wollen uns in den folgenden Aufgaben diesen beiden Grundlagen der Sprache von R widmen.

5. Beschreiben Sie anhand der folgenden Kodezeilen, was jeweils Funktionen und was Objekte sind:

```{r results='hide'}
sqrt(x)
help("sqrt")
?help
y <- c(1,3,4,5,6,7,NA)
```

6. Argumente erweitern nochmals die Funktionen, in dem sie deren Details bestimmen. In unser Objekt y scheint ein fehlende Wert vorhanden zu sein. Wie könnten wir trotzdem die Varianz von dem Objekt berechnen?
  + Und falls das geklappt hat: Was sind in Ihrer neuen Kodezeile zur Berechnung der Varianz für Objekte enthalten?

7. Objekte in R können nun in verschiedene Kategorien eingeteilt werden (wir bleiben heute mal bei den Zahlen). So gibt es *einzelne Zahlen*, eine Reihe von Zahlen (*Vektoren*) und Matrizen von Zahlen (*Matrix*) sowie *Dataframes* («Datensätze», werden wir später noch kennenlernen).[^3] Versuchen sie nun für jeden Objekttyp ein Beispiel zu erstellen:
  + Erstellen Sie verschiedenene Objekt aus einzelnen Zahlen.
  + Erstellen Sie drei Vektoren derselben Länge, wovon einer auch einzelne Objekte aus der vorherigen Teilaufgabe enthält.
  + Verbinden Sie die drei Vektoren zu einer Matrix, einmal über den Befehl 'cbind()' und einmal über 'rbind()'.
  + Welche Ihrer beiden Matrizen macht mehr Sinn? Könnte eine davon einem sozialwissenschaftlichem Datensatz entsprechen?


### Bonusaufgabe 
Funktionen sind in den verschiedensten Paketen organisiert, wovon allerdings bereits ein Grossteil im Basispaket von R selber enthalten ist. Mit folgender Funktion können wir etwa betrachten, welche Pakete installiert worden sind.
```{r results='hide'}
installed.packages()

```

Wir möchten nun dieses Liste exportieren. Definieren Sie sich dazu ein Arbeitsverzeichnis über die Menüsteuerung «Session > Set Working Directory > Choose Directory» oder über den Befehl 'setwd()'. Erstere Variante ist etwas einfach. Der 'getwd()' Befehl wiederum gibt das aktuell festgelegte Vereichnis aus. Ein Arbeitsverzeichnis ist der Ort, auf den R immer als erstes zugreift und wo Dinge automatisch abgelegt werden. Speichern Sie jeweils Ihr aktuelles Arbeitsverzeichnis als Teil des Markdowns:
```{r eval=F}
setwd("C:/Users/SchweglG/R_Daten/HS19/E2")
```

Machen Sie sich nun eine CSV-Datei (**C**omma **S**eparated **V**alue) aus der Liste der Pakete über folgenden Befehl:
```{r}
write.table(pakete_liste, file="Paketliste_neu.csv", sep=",")
```
...und schauen Sie doch mal nach, ob die Datei am richtigen Ort gelandet ist. 



[^1]: Falls Sie noch Probleme bei der Installation von R bzw. R-Studio oder sonstige Schwierigkeiten können Sie diese weiterhin melden.
[^2]: Auch das vorliegende Dokument wurde über R Markdown File erstellt.
[^3]: Ergänzen müsste man an der Stelle noch Listen und Arrays. Diese beiden Objekttypen werden nicht Teil dieses Seminars sein.
